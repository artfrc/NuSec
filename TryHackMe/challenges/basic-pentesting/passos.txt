IP maquina: 10.10.122.225
1. Ping na maquina: ping 10.10.122.225
2. Mapear
   nmap -T4 -sC -sV 10.10.122.225 >> passos.txt

   -T4: aumenta velocidade

   -sC: Ativa o script scanning usando o conjunto padrão de scripts do Nmap (Nmap Scripting Engine - NSE). Esses scripts tentam identificar vulnerabilidades, serviços ou informações adicionais nas portas abertas, como versões de software ou configurações específicas. Por exemplo, pode detectar se um servidor HTTP suporta determinados métodos ou identificar serviços como SMB ou SSH. Aumenta o tempo do escaneamento, mas fornece mais detalhes.
   
   -sV: Habilita a detecção de versão dos serviços rodando nas portas abertas. O Nmap tenta identificar o software e sua versão (ex.: "Apache 2.4.18" ou "OpenSSH 7.6p1"). Isso é útil para auditorias de segurança, mas pode ser mais lento, pois envia probes adicionais.

   >> PORTA 445 ABERTA (SMB):
   O SMB é um protocolo de compartilhamento de arquivos, impressoras e outros recursos em redes, comumente usado em ambientes Windows para comunicação entre máquinas, como acessar pastas compartilhadas ou impressoras de rede.
   
3. Procurar diretórios escondidos
   gobuster -u http://10.10.122.225 -w /usr/share/wordlists/dirb/common.txt dir

   Serve para descobrir recursos ocultos em servidores web, como diretórios, arquivos, subdomínios ou endpoints de APIs, por meio de ataques de força bruta ou varredura com listas de palavras (wordlists).

   Enumeração de diretórios e arquivos: Escaneia um servidor web para encontrar diretórios ou arquivos escondidos (ex.: /admin, /config.php) usando uma lista de palavras.
   
4. Procurar com força bruta o usuário
   enum4linux -S 10.10.122.225 > i-enum4linux.txt

   -S: listar os diretórios compartilhados pelo serviço SMB (porta 445 ou 139)

   há um usuário anonymus, então: 
      smbclient //10.10.122.225/Anonymous
      ls
      get staff.txt

5. Encontrar senha dos usuários com força bruta
   hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.122.225 -V > i-hydra-jan.txt

   Tenta descobrir a senha do usuário jan no serviço SSH do IP 10.10.122.225 usando o dicionário rockyou.txt.

6. Enumere a máquina para encontrar quaisquer vetores para escalonamento de privilégios
   Faltava privilégios (faltou permissão para cat /etc/shadow e permissão de sudo)
      /etc/shadow: É o arquivo que guarda os hashes das senhas dos usuários no Linux. Quem tiver acesso a ele pode tentar descobrir as senhas dos usuários do sistema — mesmo sem estar logado como eles.

   Então pegamos a chave privada de kay e usamos ssh2john para converter a chave privada  em um hash.

   ssh2john id > hash.txt

      O ssh2john converte chaves privadas SSH (como id_rsa) para um formato que o John the Ripper consiga entender e quebrar.
      Antes de usar o john para tentar quebrar essa senha, você precisa converter a chave para um formato compatível. Aí entra o ssh2john.

   agora crackear com john:
      john hash.txt --wordlist=/usr/share/wordlists/rockyou.txt

      gerou a senha beeswax

7. Usar SSH de kay usando a chave privada
   primeiro dar permissão do hash
      chmod 600 hash.txt
   
   
